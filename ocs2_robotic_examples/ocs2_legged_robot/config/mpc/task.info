centroidalModelType             1      // 0: FullCentroidalDynamics, 1: Single Rigid Body Dynamics
  
legged_robot_interface
{
  verbose                               true  // show the loaded parameters
  useAnalyticalGradientsDynamics        false
  useAnalyticalGradientsConstraints     false
}

model_settings
{
  positionErrorGain             0.01
  phaseTransitionStanceTime     0.4

  verboseCppAd                  true
  recompileLibrariesCppAd       true
  modelFolderCppAd              /tmp/ocs2_ros2
}

swing_trajectory_config
{
  liftOffVelocity               0.2
  touchDownVelocity            -0.4
  swingHeight                   0.1
  touchdownAfterHorizon         0.2
  swingTimeScale                0.15
}

; multiple_shooting settings
multiple_shooting
{
  nThreads                              3
  dt                                    0.015
  sqpIteration                          1
  deltaTol                              1e-4
  g_max                                 1e-2
  g_min                                 1e-6
  inequalityConstraintMu                0.1
  inequalityConstraintDelta             5.0
  projectStateInputEqualityConstraints  true
  printSolverStatistics                 true
  printSolverStatus                     false
  printLinesearch                       false
  useFeedbackPolicy                     true
  integratorType                        RK2
  threadPriority                        50
}

; DDP settings
ddp
{
  algorithm                       SLQ

  nThreads                        3
  threadPriority                  50

  maxNumIterations                1
  minRelCost                      1e-1
  constraintTolerance             5e-3

  displayInfo                     true
  displayShortSummary             true
  checkNumericalStability         false
  debugPrintRollout               false
  debugCaching                    false

  AbsTolODE                       1e-5
  RelTolODE                       1e-3
  maxNumStepsPerSecond            50000
  timeStep                        1e-2
  backwardPassIntegratorType      ODE45

  constraintPenaltyInitialValue   20.0
  constraintPenaltyIncreaseRate   2.0

  preComputeRiccatiTerms          true

  useFeedbackPolicy               true

  strategy                        LINE_SEARCH
  lineSearch
  {
    minStepLength                 1e-4
    maxStepLength                 1.0
    hessianCorrectionStrategy     DIAGONAL_SHIFT
    hessianCorrectionMultiple     1e-8
  }
}

; Rollout settings
rollout
{
  AbsTolODE                       1e-5
  RelTolODE                       1e-3
  timeStep                        1e-2
  integratorType                  ODE45
  maxNumStepsPerSecond            10000
  checkNumericalStability         false
}

mpc
{
  timeHorizon                     1.0  ; [s]
  solutionTimeWindow              -1.0   ; maximum [s]
  coldStart                       false

  debugPrint                      true

  mpcDesiredFrequency             -1  ; [Hz]
  mrtDesiredFrequency             400 ; [Hz]
}

initialState
{
  ;; Normalized Centroidal Momentum: [linear, angular] ;;
  (0,0)  0.0     ; vcom_x
  (1,0)  0.0     ; vcom_y
  (2,0)  0.0     ; vcom_z
  (3,0)  0.0     ; L_x / robotMass
  (4,0)  0.0     ; L_y / robotMass
  (5,0)  0.0     ; L_z / robotMass

  ;; Base Pose: [position, orientation] ;;
  (6,0)  0.0     ; p_base_x
  (7,0)  0.0     ; p_base_y
  (8,0)  0.8     ; p_base_z
  (9,0)  0.0     ; theta_base_z
  (10,0) 0.0     ; theta_base_y
  (11,0) 0.0     ; theta_base_x

  ;; TODO FIX (senceryazici):
  ;; expected: 
  ;; [LF, LH, RF, RH]
  ;; actual:
  ;; [LF, RF, LH, RH]
  ;; [+, -, -, +]

  ;; Leg Joint Positions: [LF, LH, RF, RH] ;;
  (12,0)  0.00   ; AL_coxa_joint
  (13,0)  0.65   ; AL_femur_joint
  (14,0) -1.30   ; AL_tibia_joint
  (15,0)  0.00   ; AL_steer_joint
  (16,0)  0.00   ; AR_coxa_joint
  (17,0)  0.65   ; AR_femur_joint
  (18,0) -1.30   ; AR_tibia_joint
  (19,0)  0.00   ; AR_steer_joint
  (20,0)  0.00   ; BL_coxa_joint
  (21,0) -0.65   ; BL_femur_joint
  (22,0)  1.30   ; BL_tibia_joint
  (23,0)  0.00   ; BL_steer_joint
  (24,0)  0.00   ; BR_coxa_joint
  (25,0) -0.65   ; BR_femur_joint
  (26,0)  1.30   ; BR_tibia_joint
  (27,0)  0.00   ; BR_steer_joint
} 

; standard state weight matrix
Q
{
  scaling 1e+0

  ;; Normalized Centroidal Momentum: [linear, angular] ;;
  (0,0)   15.0     ; vcom_x
  (1,1)   15.0     ; vcom_y
  (2,2)   30.0     ; vcom_z
  (3,3)   5.0      ; L_x / robotMass
  (4,4)   10.0     ; L_y / robotMass
  (5,5)   10.0     ; L_z / robotMass

  ;; Base Pose: [position, orientation] ;;
  (6,6)   500.0    ; p_base_x
  (7,7)   500.0    ; p_base_y
  (8,8)   500.0    ; p_base_z
  (9,9)   1500.0    ; theta_base_z
  (11,11) 2000.0    ; theta_base_x
  (10,10) 2000.0    ; theta_base_y

  ;; Leg Joint Positions: [LF, LH, RF, RH] ;;
  (12,12) 20.00    ; AL_coxa_joint
  (13,13) 20.00    ; AL_femur_joint
  (14,14) 20.00    ; AL_tibia_joint
  (15,15) 20.00    ; AL_steer_joint
  (16,16) 20.00    ; AR_coxa_joint
  (17,17) 20.00    ; AR_femur_joint
  (18,18) 20.00    ; AR_tibia_joint
  (19,19) 20.00    ; AR_steer_joint
  (20,20) 20.00    ; BL_coxa_joint
  (21,21) 20.00    ; BL_femur_joint
  (22,22) 20.00    ; BL_tibia_joint
  (23,23) 20.00    ; BL_steer_joint
  (24,24) 20.00    ; BR_coxa_joint
  (25,25) 20.00    ; BR_femur_joint
  (26,26) 20.00    ; BR_tibia_joint
  (27,27) 20.00    ; BR_steer_joint
}

; control weight matrix
R
{
  scaling 1e-3

  ;; Feet Contact Forces: [LF, RF, LH, RH] ;;
  (0,0)   1.0       ; left_front_force
  (1,1)   1.0       ; left_front_force
  (2,2)   1.0       ; left_front_force
  (3,3)   1.0       ; right_front_force
  (4,4)   1.0       ; right_front_force
  (5,5)   1.0       ; right_front_force
  (6,6)   1.0       ; left_hind_force
  (7,7)   1.0       ; left_hind_force
  (8,8)   1.0       ; left_hind_force
  (9,9)   1.0       ; right_hind_force
  (10,10) 1.0       ; right_hind_force
  (11,11) 1.0       ; right_hind_force

  ;; foot velocity relative to base: [LF, LH, RF, RH] (uses the Jacobian at nominal configuration) ;;
  ;; senceryazici: It's definetely NOT!!!!!!
  (12,12) 5000.0    ; x
  (13,13) 5000.0    ; y
  (14,14) 5000.0    ; z
  (15,15) 5000.0    ; x
  (16,16) 5000.0    ; y
  (17,17) 5000.0    ; z
  (18,18) 5000.0    ; x
  (19,19) 5000.0    ; y
  (20,20) 5000.0    ; z
  (21,21) 5000.0    ; x
  (22,22) 5000.0    ; y
  (23,23) 5000.0    ; z
  (24,24) 5000.0    ; z
  (25,25) 5000.0    ; z
  (26,26) 5000.0    ; z
  (27,27) 5000.0    ; z
}

frictionConeSoftConstraint
{
  frictionCoefficient    0.5
  
  ; relaxed log barrier parameters
  mu                     0.1
  delta                  5.0
}
